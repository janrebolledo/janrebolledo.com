---
import ProjectCard from "./ProjectCard.astro";

const { projects } = Astro.props;
---

{
  projects.map((project) => (
    <ProjectCard project={project} alt={project.order % 2 === 0} />
  ))
}

<script data-astro-rerun is:inline>
  const videosArray = document.getElementsByTagName("video");
  const videos = [...videosArray];

  const options = {
    threshold: 0.5,
  };

  const observer = new IntersectionObserver((entries, observer) => {
    entries.forEach((entry) => {
      const video = entry.target;
      if (entry.isIntersecting) {
        video.play();
      } else {
        video.pause();
      }
    });
  }, options);

  videos.forEach((video) => {
    observer.observe(video);
  });
</script>
